(function(b,c){var a={getRandom:function(e,d){return Math.floor(Math.random()*(d-e+1))+e}};b.Tools=a})(window,undefined);(function(d,f){var b="absolute";var e=[];function c(g){g=g||{};this.x=g.x||0;this.y=g.y||0;this.width=g.width||20;this.height=g.height||20;this.color=g.color||"green"}c.prototype.render=function(){a();this.x=Tools.getRandom(0,map.offsetWidth/this.width-1)*this.width;this.y=Tools.getRandom(0,map.offsetHeight/this.height-1)*this.height;var g=document.createElement("div");map.appendChild(g);e.push(g);g.style.position=b;g.style.top=this.y+"px";g.style.left=this.x+"px";g.style.width=this.width+"px";g.style.height=this.height+"px";g.style.backgroundColor=this.color};function a(){for(var g=e.length-1;g>=0;g--){e[g].parentNode.removeChild(e[g]);e.splice(g,1)}}d.Food=c})(window,undefined);(function(d,f){var b="absolute";var e=[];function c(g){g=g||{};this.width=g.width||20;this.height=g.height||20;this.direction=g.direction||"right";this.body=[{x:3,y:2,color:"red"},{x:2,y:2,color:"blue"},{x:1,y:2,color:"blue"}]}c.prototype.render=function(k){a();for(var j=0,g=this.body.length;j<g;j++){var h=this.body[j];var l=document.createElement("div");k.appendChild(l);e.push(l);l.style.position=b;l.style.width=this.width+"px";l.style.height=this.height+"px";l.style.left=h.x*this.width+"px";l.style.top=h.y*this.height+"px";l.style.backgroundColor=h.color}};c.prototype.move=function(l){for(var j=this.body.length-1;j>0;j--){this.body[j].x=this.body[j-1].x;this.body[j].y=this.body[j-1].y}var h=this.body[0];switch(this.direction){case"right":h.x+=1;break;case"left":h.x-=1;break;case"up":h.y-=1;break;case"down":h.y+=1;break}var g=h.x*this.width;var m=h.y*this.height;if(m==l.y&&g==l.x){var k=this.body[this.body.length-1];this.body.push({x:k.x,y:k.y,color:k.color});l.render()}};function a(){for(var g=e.length-1;g>=0;g--){e[g].parentNode.removeChild(e[g]);e.splice(g,1)}}d.Snake=c})(window,undefined);(function(d,e){var c;function f(g){c=this;this.food=new Food();this.snake=new Snake();this.map=g}f.prototype.start=function(){this.food.render(this.map);this.snake.render(this.map);b();a()};function a(){document.addEventListener("keydown",function(g){switch(g.keyCode){case 38:if(c.snake.direction!="down"){c.snake.direction="up"}break;case 87:if(c.snake.direction!="down"){c.snake.direction="up"}break;case 40:if(c.snake.direction!="up"){c.snake.direction="down"}break;case 83:if(c.snake.direction!="up"){c.snake.direction="down"}break;case 37:if(c.snake.direction!="right"){c.snake.direction="left"}break;case 65:if(c.snake.direction!="right"){c.snake.direction="left"}break;case 39:if(c.snake.direction!="left"){c.snake.direction="right"}break;case 68:if(c.snake.direction!="left"){c.snake.direction="right"}break}},false)}function b(){var g=setInterval(function(){c.snake.move(c.food);c.snake.render(c.map);var j=c.map.offsetWidth/c.snake.width-1;var i=c.map.offsetHeight/c.snake.height-1;var h=c.snake.body[0].x;var k=c.snake.body[0].y;if(h<0||h>j||k<0||k>i){clearInterval(g);alert("Gome Over 请刷新重来")}},150)}d.Game=f})(window,undefined);(function(b,d){var c=document.getElementById("map");var a=new Game(c);a.start()})(window,undefined);